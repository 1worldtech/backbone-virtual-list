define(["backbone","lodash"],function(t,e){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n=i(1),o=i(10),r=i(7);i(3);var s=n.View.extend(r);s.extend=o,t.exports=s},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e){},function(t,e,i){var n=i(1),o=i(13),r=i(12);t.exports={itemHeight:30,listHeight:300,itemView:null,events:{scroll:"virtualScroll"},initialize:function(t){r(this,t,"itemHeight"),r(this,t,"listHeight"),r(this,t,"itemView"),this.__firstVisibleIndex=0,this.__cache=new o,this.__expander=null,this.listenTo(this.collection,"remove",this.virtualRemoveItem).listenTo(this.collection,"add",this.virtualSyncList).listenTo(this.collection,"reset sort",this.virtualReset)},render:function(){return this.virtualExpanderRemove(),this.$el.addClass("c-virtual-list").height(this.listHeight),this.virtualExpanderSet(),this.$el.html(this.__expander),this.virtualScroll(),setTimeout(this.setCustomScroll.bind(this),1),this},remove:function(){this.__cache.removeAll(),this.removeCustomScroll(),this.virtualExpanderRemove(),n.View.prototype.remove.apply(this,arguments)}}},function(t,e){t.exports={setCustomScroll:function(){},updateCustomScroll:function(){},removeCustomScroll:function(){}}},function(t,e){t.exports={virtualExpanderSet:function(){this.__expander=document.createElement("div"),this.__expander.className="c-virtual-list__expander",this.virtualExpanderSync()},virtualExpanderSync:function(){this.__expander.style.height=this.collection.length*this.itemHeight+"px"},virtualExpanderRemove:function(){this.__expander&&(this.el.removeChild(this.__expander),this.__expander=null)}}},function(t,e,i){var n=[i(4),i(5),i(6),i(8),i(9)];t.exports=i(11)(n)},function(t,e){t.exports={virtualGetView:function(t){var e=new this.itemView({model:this.collection.models[t]});return this.__cache.add(e),e.render(),e},virtualReset:function(){this.__cache.removeAll(),this.virtualSyncList()},virtualSyncList:function(){this.virtualExpanderSync(),this.virtualScroll(),this.updateCustomScroll()},virtualRemoveItem:function(t){this.__cache.remove(t),this.virtualSyncList()},virtualSetHeight:function(t){this.listHeight=t,this.$el.height(this.listHeight),this.updateCustomScroll()}}},function(t,e){function i(t,e,i){return e<t?[e+i,t+i]:[t,e]}t.exports={virtualScroll:function(){var t=Math.max(0,Math.floor(this.el.scrollTop/this.itemHeight)-3),e=Math.floor(this.listHeight/this.itemHeight)+6,i=Math.min(this.collection.length,t+e);this.virtualHideItems(t,e),this.virtualShowItems(t,i)},virtualHideItems:function(t,e){var n=i(this.__firstVisibleIndex,t,e);if(n[0]!==n[1])for(var o=n[0];o<=n[1];o++){var r=this.collection.models[o];"undefined"!=typeof r&&this.__cache.hide(r)}this.__firstVisibleIndex=t,this.__cache.debouncedRemove()},virtualShowItems:function(t,e){for(var i=[],n=t;n<e;n++){var o=this.__cache.show(this.collection.models[n])||this.virtualGetView(n);o.$el.css("top",n*this.itemHeight).addClass("c-virtual-list__item"),i.push(o.el)}var r=document.createDocumentFragment();for(n=0;n<i.length;n++)r.appendChild(i[n]);this.el.appendChild(r)}}},function(t,e,i){var n=i(1),o=i(2);t.exports=function(t){var e=t.initialize,i=t.render,r=t.remove,s=this,h=n.View.extend.apply(this,arguments);return h.prototype.events=o.extend({},this.prototype.events,t.events),e&&o.isFunction(e)&&(h.prototype.initialize=function(){return s.prototype.initialize.apply(this,arguments),e.apply(this,arguments),this}),i&&o.isFunction(i)&&(h.prototype.render=function(){return s.prototype.render.apply(this,arguments),i.apply(this,arguments),this}),r&&o.isFunction(r)&&(h.prototype.remove=function(){return s.prototype.remove.apply(this,arguments),r.apply(this,arguments),this}),h}},function(t,e){t.exports=function(t,e){return e=e||[],t.reduce(function(t,i){return Object.keys(i).forEach(function(n){if(t.hasOwnProperty(n)&&void 0!==t[n]&&e.indexOf(n)===-1)throw"Previous partial already defined "+n;t[n]=i[n]}),t},{})}},function(t,e){t.exports=function(t,e,i){e&&e[i]&&(t[i]=e[i])}},function(t,e,i){function n(){this._cache={},this.debouncedRemove=o.debounce(this.removeHidden.bind(this),300)}var o=i(2);n.prototype={add:function(t){this._cache[t.model.cid]=t,t.__itemViewCacheHidden=!1},hide:function(t){var e=this._cache[t.cid];e&&(e.__itemViewCacheHidden=!0)},show:function(t){var e=this._cache[t.cid];if(e)return e.__itemViewCacheHidden=!1,e},remove:function(t){var e=this._cache[t.cid];e&&(this._cache[t.cid]=null,e.remove())},hideAll:function(){var t=this._cache;for(var e in t)t[e]&&(t[e].__itemViewCacheHidden=!0)},removeHidden:function(){var t=this._cache;for(var e in t)t[e]&&t[e].__itemViewCacheHidden&&(t[e].remove(),t[e]=null)},removeAll:function(){var t=this._cache;for(var e in t)t[e]&&(t[e].remove(),t[e]=null)}},t.exports=n}])});